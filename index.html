<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>VRealms</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/style.css" />
</head>
<body class="vr-body">
  <div class="vr-overlay"></div>

  <header class="vr-header">
    <div class="vr-top-actions">
      <button class="vr-icon-button" data-view-target="profile">
        <div class="vr-icon-image vr-icon-profile"></div>
      </button>
      <button class="vr-icon-button" data-view-target="settings">
        <div class="vr-icon-image vr-icon-settings"></div>
      </button>
      <button class="vr-icon-button" data-view-target="shop">
        <div class="vr-icon-image vr-icon-shop"></div>
      </button>
    </div>
  </header>

  <main class="vr-main">
    <!-- Vue : Accueil / choix d'univers -->
    <section id="view-home" class="vr-view vr-view-active">
      <section class="vr-intro">
        <img
          src="assets/img/ui/logo_vrealms.webp"
          alt="VRealms"
          class="vr-main-logo"
          draggable="false"
        />
      </section>

      <section class="vr-universes">
        <h2 class="vr-section-title" data-i18n="ui.choose_universe"></h2>

        <div class="vr-universe-grid">
          <!-- Roi des Enfers -->
          <button class="vr-card" data-universe="hell_king">
            <div class="vr-card-bg vr-card-bg-hell"></div>
            <div class="vr-card-content">
              <div class="vr-card-header-line">
                <h3 class="vr-card-title" data-i18n="universe.hell_king.title"></h3>
                <button
                  type="button"
                  class="vr-info-btn"
                  data-i18n-tip="universe.hell_king.desc"
                  data-tip="Dirige les légions démoniaques, gère l’afflux d’âmes damnées et maintiens l’équilibre entre chaos et ordre cosmique."
                >
                  ?
                </button>
              </div>
            </div>
          </button>

          <!-- Paradis -->
          <button class="vr-card" data-universe="heaven_king">
            <div class="vr-card-bg vr-card-bg-heaven"></div>
            <div class="vr-card-content">
              <div class="vr-card-header-line">
                <h3 class="vr-card-title" data-i18n="universe.heaven_king.title"></h3>
                <button
                  type="button"
                  class="vr-info-btn"
                  data-i18n-tip="universe.heaven_king.desc"
                  data-tip="Arbitre les prières, contient le fanatisme et décide jusqu’où le Ciel doit intervenir dans le monde des mortels."
                >
                  ?
                </button>
              </div>
            </div>
          </button>

          <!-- Roi médiéval -->
          <button class="vr-card" data-universe="medieval_king">
            <div class="vr-card-bg vr-card-bg-medieval"></div>
            <div class="vr-card-content">
              <div class="vr-card-header-line">
                <h3 class="vr-card-title" data-i18n="universe.medieval_king.title"></h3>
                <button
                  type="button"
                  class="vr-info-btn"
                  data-i18n-tip="universe.medieval_king.desc"
                  data-tip="Églises, armée, peuple, trésor : chaque décision te rapproche de la prospérité… ou de la révolte."
                >
                  ?
                </button>
              </div>
            </div>
          </button>

          <!-- Président puissance occidentale -->
          <button class="vr-card" data-universe="western_president">
            <div class="vr-card-bg vr-card-bg-western"></div>
            <div class="vr-card-content">
              <div class="vr-card-header-line">
                <h3 class="vr-card-title" data-i18n="universe.western_president.title"></h3>
                <button
                  type="button"
                  class="vr-info-btn"
                  data-i18n-tip="universe.western_president.desc"
                  data-tip="Opinion publique, économie, diplomatie et crises médiatiques : une signature peut tout faire basculer."
                >
                  ?
                </button>
              </div>
            </div>
          </button>

          <!-- CEO méga-entreprise -->
          <button class="vr-card" data-universe="mega_corp_ceo">
            <div class="vr-card-bg vr-card-bg-corp"></div>
            <div class="vr-card-content">
              <div class="vr-card-header-line">
                <h3 class="vr-card-title" data-i18n="universe.mega_corp_ceo.title"></h3>
                <button
                  type="button"
                  class="vr-info-btn"
                  data-i18n-tip="universe.mega_corp_ceo.desc"
                  data-tip="Investisseurs, employés, régulateurs et image de marque. Ta moindre décision peut faire exploser la valorisation… ou tout crasher."
                >
                  ?
                </button>
              </div>
            </div>
          </button>

          <!-- Explorateur du Nouveau Monde -->
          <button class="vr-card" data-universe="new_world_explorer">
            <div class="vr-card-bg vr-card-bg-explorer"></div>
            <div class="vr-card-content">
              <div class="vr-card-header-line">
                <h3 class="vr-card-title" data-i18n="universe.new_world_explorer.title"></h3>
                <button
                  type="button"
                  class="vr-info-btn"
                  data-i18n-tip="universe.new_world_explorer.desc"
                  data-tip="Négocier avec les peuples locaux, convertir, exploiter ou protéger : ta conquête écrira l’histoire."
                >
                  ?
                </button>
              </div>
            </div>
          </button>

          <!-- Chef vampire -->
          <button class="vr-card" data-universe="vampire_lord">
            <div class="vr-card-bg vr-card-bg-vampire"></div>
            <div class="vr-card-content">
              <div class="vr-card-header-line">
                <h3 class="vr-card-title" data-i18n="universe.vampire_lord.title"></h3>
                <button
                  type="button"
                  class="vr-info-btn"
                  data-i18n-tip="universe.vampire_lord.desc"
                  data-tip="Entre soif de sang, discrétion et luttes de clan, chaque nuit peut être la dernière… ou le début d’une nouvelle dynastie."
                >
                  ?
                </button>
              </div>
            </div>
          </button>

          <!-- Univers futur verrouillé -->
          <button class="vr-card vr-card-disabled" disabled>
            <div class="vr-card-bg vr-card-bg-locked"></div>
            <div class="vr-card-content">
              <h3 class="vr-card-title" data-i18n="universe.locked.title"></h3>
              <p class="vr-card-text" data-i18n="universe.locked.desc"></p>
            </div>
          </button>
        </div>
      </section>
    </section>
  </main>

  <footer class="vr-footer">
    <span class="vr-footer-text" data-i18n="ui.footer"></span>
  </footer>

  <div id="vr-tooltip" class="vr-tooltip"></div>

  <script>
    (function () {
      const tooltip = document.getElementById("vr-tooltip");
      if (!tooltip) return;

      function hideTooltip() {
        tooltip.classList.remove("vr-tooltip-visible");
        tooltip.style.display = "none";
      }

      document.querySelectorAll(".vr-info-btn").forEach((btn) => {
        btn.addEventListener("click", function (e) {
          e.stopPropagation();

          let text = btn.getAttribute("data-tip") || "";
          const key = btn.getAttribute("data-i18n-tip");

          if (window.i18nGet && key) {
            const t = window.i18nGet(key);
            if (t) text = t;
          }

          const rect = btn.getBoundingClientRect();
          const scrollY = window.scrollY || window.pageYOffset;
          const scrollX = window.scrollX || window.pageXOffset;

          tooltip.textContent = text;
          tooltip.style.display = "block";
          tooltip.style.top = rect.bottom + 8 + scrollY + "px";
          tooltip.style.left = rect.left + rect.width / 2 + scrollX + "px";
          tooltip.classList.add("vr-tooltip-visible");
        });
      });

      document.addEventListener("click", hideTooltip);
      window.addEventListener("scroll", hideTooltip);
      window.addEventListener("resize", hideTooltip);
    })();
  </script>

  <script src="js/userData.js"></script>
  <script src="js/ads.js"></script>
  <script src="js/purchases.js"></script>
  <script src="js/shop.js"></script>
  <script src="js/i18n.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      try {
        if (window.VRI18n && typeof window.VRI18n.initI18n === "function") {
          await window.VRI18n.initI18n();
        }
      } catch (e) {
        console.error("[VRealms] i18n init error:", e);
      }
    });
  </script>
</body>
</html>
