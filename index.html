<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>VRealms</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="stylesheet" href="css/style.css" />

  <!-- ✅ Overrides DIRECT DANS INDEX -->
  <style>
    /* ===== HEADER ICONS tout en haut, sans halo/blur/cadre ===== */
    .vr-header{
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      z-index: 9999 !important;
      padding: 10px 12px !important;
      background: transparent !important;
      pointer-events: none; /* on réactive sur les boutons */
    }
    .vr-top-actions{
      display: flex !important;
      justify-content: center !important;   /* ✅ centré comme ton screen */
      gap: 10px !important;
      pointer-events: auto; /* ✅ cliquable */
    }
    .vr-icon-button{
      display: inline-flex !important;
      align-items: center !important;
      justify-content: center !important;
      width: 44px !important;
      height: 44px !important;

      /* ✅ suppression totale de l’effet */
      background: transparent !important;
      box-shadow: none !important;
      border: 0 !important;
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;

      text-decoration: none !important;
      padding: 0 !important;
    }
    .vr-icon-button img{
      width: 30px !important;
      height: 30px !important;
      object-fit: contain !important;
      display:block !important;
      filter: none !important;
    }

    /* Laisse de la place au contenu sous le header */
    .vr-main{ padding-top: 72px !important; }

    /* ===== CARTES (plus de button dans button) ===== */
    .vr-card{
      position: relative !important;
      overflow: hidden !important;
      border-radius: 16px; /* si ton style.css gère déjà, pas grave */
    }

    /* WebP en fond à 50% */
    .vr-card-bg{
      position: absolute !important;
      inset: 0 !important;
      background-size: cover !important;
      background-position: center !important;
      opacity: .5 !important;
      z-index: 0 !important;
    }

    /* voile pour lisibilité */
    .vr-card::after{
      content: "" !important;
      position: absolute !important;
      inset: 0 !important;
      background: linear-gradient(180deg, rgba(0,0,0,.10), rgba(0,0,0,.62)) !important;
      pointer-events: none !important;
      z-index: 1 !important;
    }

    /* bouton invisible qui couvre la carte = clic pour lancer */
    .vr-card-launch{
      position: absolute !important;
      inset: 0 !important;
      z-index: 2 !important;
      background: transparent !important;
      border: 0 !important;
      cursor: pointer !important;
    }

    /* header dans la carte (titre + ?) */
    .vr-card-header-line{
      position: absolute !important;
      top: 12px !important;
      left: 12px !important;
      right: 12px !important;
      display: flex !important;
      align-items: center !important;
      justify-content: space-between !important;
      gap: 10px !important;
      z-index: 3 !important; /* ✅ au-dessus du bouton launch */
      pointer-events: none;   /* on réactive uniquement sur ? */
    }

    .vr-card-title{
      margin: 0 !important;
      color: #fff !important;
      font-weight: 900 !important;
      font-size: 16px !important;
      letter-spacing: .2px !important;
      text-shadow: 0 2px 10px rgba(0,0,0,.85) !important;
      line-height: 1.1 !important;
    }

    /* ? DANS la cartouche */
    .vr-info-btn{
      pointer-events: auto;  /* ✅ cliquable malgré le pointer-events:none du parent */
      width: 38px !important;
      height: 38px !important;
      border-radius: 999px !important;
      border: 0 !important;
      background: rgba(245,246,249,.92) !important;
      color: #2b2a55 !important;
      font-weight: 900 !important;
      font-size: 16px !important;
      display: inline-flex !important;
      align-items: center !important;
      justify-content: center !important;
      box-shadow: 0 2px 10px rgba(0,0,0,.25) !important;
      cursor: pointer !important;
      user-select: none !important;
      flex: 0 0 auto !important;
    }
    .vr-info-btn:active{ transform: scale(.96) !important; }

    /* tooltip */
    .vr-tooltip{
      position: fixed;
      transform: translateX(-50%);
      max-width: min(360px, calc(100vw - 24px));
      background: rgba(20,20,28,.92);
      color: #fff;
      padding: 10px 12px;
      border-radius: 12px;
      font-size: 13px;
      line-height: 1.35;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      opacity: 0;
      pointer-events: none;
      transition: opacity .12s ease;
      z-index: 99999;
    }
    .vr-tooltip.show{ opacity: 1; }

    @media (max-width: 520px){
      .vr-main{ padding-top: 64px !important; }
      .vr-icon-button{ width: 40px !important; height: 40px !important; }
      .vr-icon-button img{ width: 28px !important; height: 28px !important; }
      .vr-card-title{ font-size: 14px !important; }
      .vr-info-btn{ width: 34px !important; height: 34px !important; font-size: 15px !important; }
      .vr-card-header-line{ top: 10px !important; left: 10px !important; right: 10px !important; }
    }
  </style>
</head>

<body class="vr-body">
  <div class="vr-overlay"></div>

  <!-- ✅ ICONS EN HAUT -->
  <header class="vr-header" aria-label="Top actions">
    <div class="vr-top-actions">
      <a class="vr-icon-button" href="profile.html" aria-label="Profile">
        <img src="assets/img/ui/btn_profile.webp" alt="" draggable="false" />
      </a>
      <a class="vr-icon-button" href="settings.html" aria-label="Settings">
        <img src="assets/img/ui/btn_settings.webp" alt="" draggable="false" />
      </a>
      <a class="vr-icon-button" href="shop.html" aria-label="Shop">
        <img src="assets/img/ui/btn_shop.webp" alt="" draggable="false" />
      </a>
    </div>
  </header>

  <main class="vr-main" aria-label="Main content">
    <section id="home">
      <section class="vr-intro">
        <img
          src="assets/img/ui/logo_vrealms.webp"
          alt="VRealms"
          class="vr-main-logo"
          draggable="false"
        />
      </section>

      <section class="vr-universes">
        <h2 class="vr-section-title" data-i18n="ui.choose_universe"></h2>

        <div class="vr-universe-grid">

          <!-- ✅ Carte = DIV (pas button) -->
          <div class="vr-card" data-universe="hell_king" role="button" tabindex="0" aria-label="Hell King">
            <div class="vr-card-bg" style="background-image:url('assets/img/ui/universes/hell_king.webp');"></div>
            <button class="vr-card-launch" type="button" aria-label="Lancer Hell King"></button>
            <div class="vr-card-header-line">
              <h3 class="vr-card-title" data-i18n="universe.hell_king.title"></h3>
              <button type="button" class="vr-info-btn" data-i18n-tip="universe.hell_king.desc" data-tip="Règne sur les Enfers.">?</button>
            </div>
          </div>

          <div class="vr-card" data-universe="heaven_king" role="button" tabindex="0" aria-label="Heaven King">
            <div class="vr-card-bg" style="background-image:url('assets/img/ui/universes/heaven_king.webp');"></div>
            <button class="vr-card-launch" type="button" aria-label="Lancer Heaven King"></button>
            <div class="vr-card-header-line">
              <h3 class="vr-card-title" data-i18n="universe.heaven_king.title"></h3>
              <button type="button" class="vr-info-btn" data-i18n-tip="universe.heaven_king.desc" data-tip="Gère le Ciel.">?</button>
            </div>
          </div>

          <div class="vr-card" data-universe="medieval_king" role="button" tabindex="0" aria-label="Medieval King">
            <div class="vr-card-bg" style="background-image:url('assets/img/ui/universes/medieval_king.webp');"></div>
            <button class="vr-card-launch" type="button" aria-label="Lancer Medieval King"></button>
            <div class="vr-card-header-line">
              <h3 class="vr-card-title" data-i18n="universe.medieval_king.title"></h3>
              <button type="button" class="vr-info-btn" data-i18n-tip="universe.medieval_king.desc" data-tip="Royaume médiéval.">?</button>
            </div>
          </div>

          <div class="vr-card" data-universe="western_president" role="button" tabindex="0" aria-label="Western President">
            <div class="vr-card-bg" style="background-image:url('assets/img/ui/universes/western_president.webp');"></div>
            <button class="vr-card-launch" type="button" aria-label="Lancer Western President"></button>
            <div class="vr-card-header-line">
              <h3 class="vr-card-title" data-i18n="universe.western_president.title"></h3>
              <button type="button" class="vr-info-btn" data-i18n-tip="universe.western_president.desc" data-tip="Politique moderne.">?</button>
            </div>
          </div>

          <div class="vr-card" data-universe="mega_corp_ceo" role="button" tabindex="0" aria-label="Mega Corp CEO">
            <div class="vr-card-bg" style="background-image:url('assets/img/ui/universes/mega_corp_ceo.webp');"></div>
            <button class="vr-card-launch" type="button" aria-label="Lancer Mega Corp CEO"></button>
            <div class="vr-card-header-line">
              <h3 class="vr-card-title" data-i18n="universe.mega_corp_ceo.title"></h3>
              <button type="button" class="vr-info-btn" data-i18n-tip="universe.mega_corp_ceo.desc" data-tip="Entreprise géante.">?</button>
            </div>
          </div>

          <div class="vr-card" data-universe="new_world_explorer" role="button" tabindex="0" aria-label="New World Explorer">
            <div class="vr-card-bg" style="background-image:url('assets/img/ui/universes/new_world_explorer.webp');"></div>
            <button class="vr-card-launch" type="button" aria-label="Lancer New World Explorer"></button>
            <div class="vr-card-header-line">
              <h3 class="vr-card-title" data-i18n="universe.new_world_explorer.title"></h3>
              <button type="button" class="vr-info-btn" data-i18n-tip="universe.new_world_explorer.desc" data-tip="Exploration.">?</button>
            </div>
          </div>

          <div class="vr-card" data-universe="vampire_lord" role="button" tabindex="0" aria-label="Vampire Lord">
            <div class="vr-card-bg" style="background-image:url('assets/img/ui/universes/vampire_lord.webp');"></div>
            <button class="vr-card-launch" type="button" aria-label="Lancer Vampire Lord"></button>
            <div class="vr-card-header-line">
              <h3 class="vr-card-title" data-i18n="universe.vampire_lord.title"></h3>
              <button type="button" class="vr-info-btn" data-i18n-tip="universe.vampire_lord.desc" data-tip="Nuit & influence.">?</button>
            </div>
          </div>

        </div>
      </section>
    </section>
  </main>

  <div class="vr-tooltip" id="vrTooltip" aria-hidden="true"></div>

  <script>
    // 1) Tooltip "?"
    (function () {
      const tooltip = document.getElementById("vrTooltip");
      if (!tooltip) return;

      function hide() {
        tooltip.classList.remove("show");
        tooltip.setAttribute("aria-hidden", "true");
      }

      document.addEventListener("click", hide);
      window.addEventListener("scroll", hide, { passive: true });
      window.addEventListener("resize", hide);

      document.querySelectorAll(".vr-info-btn").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          e.preventDefault();
          e.stopPropagation(); // ✅ ne lance pas le jeu

          let text = btn.getAttribute("data-tip") || "?";
          if (window.VRI18n?.t) {
            const k = btn.getAttribute("data-i18n-tip");
            const tr = k ? window.VRI18n.t(k) : "";
            if (tr) text = tr;
          }

          tooltip.textContent = text;

          const r = btn.getBoundingClientRect();
          tooltip.style.left = (r.left + r.width / 2) + "px";
          tooltip.style.top = (r.bottom + 10) + "px";

          tooltip.classList.add("show");
          tooltip.setAttribute("aria-hidden", "false");
        });
      });
    })();

    // 2) Lancer game.html + stocker l'univers
    (function () {
      function launchUniverse(universeId) {
        if (!universeId) return;
        localStorage.setItem("vrealms_universe", universeId); // ✅ le même que game.js utilise
        window.location.href = "game.html";
      }

      document.querySelectorAll(".vr-card").forEach((card) => {
        const id = card.getAttribute("data-universe");
        const hit = card.querySelector(".vr-card-launch");

        if (hit) {
          hit.addEventListener("click", (e) => {
            e.preventDefault();
            launchUniverse(id);
          });
        }

        // clavier (enter / espace)
        card.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            launchUniverse(id);
          }
        });
      });
    })();
  </script>

  <script src="js/userData.js"></script>
  <script src="js/ads.js"></script>
  <script src="js/purchases.js"></script>
  <script src="js/shop.js"></script>
  <script src="js/i18n.js"></script>
</body>
</html>
